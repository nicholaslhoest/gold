---
import "../styles/global.css";
const { title, date, time, keys, collection } = Astro.props;

const toConvertDate = (dateStr) => {
    const d = new Date(dateStr);
    return isNaN(d)
        ? String(dateStr)
        : d.toLocaleDateString('en-US', {
            weekday: 'short',
            month: 'long',
            day: 'numeric',
            year: 'numeric'
        });
};

const toKeysArray = (keys) => {
    if (!keys) return [];
    const arr = Array.isArray(keys) ? keys : String(keys).split(',');
    return arr.map(k => k.replace(/\[\[|\]\]/g, '').trim()).filter(Boolean);
};

const toKeysString = (keys) => toKeysArray(keys).join(', ');

---
<article class="max-w-3xl mx-auto px-6 py-10 leading-relaxed text-gray-900">
    <header class="mb-2 space-y-2">
        <p class="text-sm text-gray-600">
            {toConvertDate(date)} | {time} min read
        </p>

        {keys && (
                <p class="text-yellow-600">
                    {toKeysString(keys)}
                </p>
        )}
    </header>

    <main class="prose text-justify prose-lg prose-gray max-w-none">
        <slot/>
    </main>
</article>
