---
import BaseLayout from "../layouts/BaseLayout.astro";

const title = "Remaining Time";

const BIRTHDATE = new Date("1996-01-01");
const LIFE_EXPECTANCY = 80;
const BOOKS_PER_YEAR = 12;
const WORDS_PER_DAY = 500;

const now = new Date();
const msInDay = 1000 * 60 * 60 * 24;

const ageMs = now.getTime() - BIRTHDATE.getTime();
const ageYears = ageMs / (msInDay * 365.25);
const currentAge = Math.floor(ageYears);

const deathDate = new Date(BIRTHDATE);
deathDate.setFullYear(BIRTHDATE.getFullYear() + LIFE_EXPECTANCY);

const msLeft = deathDate.getTime() - now.getTime();
const daysLeft = Math.max(0, Math.floor(msLeft / msInDay));
const weeksLeft = Math.floor(daysLeft / 7);
const yearsLeft = Math.max(0, Math.floor(daysLeft / 365.25));

const booksLeft = Math.floor(yearsLeft * BOOKS_PER_YEAR);
const wordsLeft = daysLeft * WORDS_PER_DAY;
---

<BaseLayout {title}>
    <h1 class="text-4xl my-4 font-bold">Hourglass</h1>

    <p>Years left: {yearsLeft}</p>
    <p>Weeks left: {weeksLeft.toLocaleString()}</p>
    <p>Days left: {daysLeft.toLocaleString()}</p>
    <p>Books left: {booksLeft.toLocaleString()}</p>
    <p>Words left: {wordsLeft.toLocaleString()}</p>
</BaseLayout>
